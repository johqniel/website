{"ast":null,"code":"var _jsxFileName = \"/Users/nielo/Desktop/website/src/App.tsx\",\n  _s = $RefreshSig$();\n// src/App.tsx\n\nimport React, { useState } from 'react';\nimport ChatWindow from './components/ChatWindow';\nimport TerminalWindow from './components/TerminalWindow';\nimport './styles/AppLayout.css'; // Import new layout CSS\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  // State for chat window \n  const [chatMessages, setChatMessages] = useState([]);\n\n  // State for analysis result\n  const [analysisResult, setAnalysisResult] = useState(null);\n\n  // get users session id\n\n  const [sessionId, setSessionId] = useState(null);\n\n  // create users id\n  useEffect(() => {\n    let currentId = localStorage.getItem('chat_session_id');\n    if (!currentId) {\n      // (use your safe random string generator here)\n      currentId = `session_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`;\n      localStorage.setItem('chat_session_id', currentId);\n    }\n    setSessionId(currentId);\n  }, []);\n\n  // function to load chat history from backend\n  const loadChatHistory = async (id, isTemplate = false) => {\n    if (!id) return; // Don't load if no ID is ready\n\n    let url = \"\";\n    if (isTemplate) {\n      url = `${API_URL}/api/get-chat?template=${id}`;\n    } else {\n      url = `${API_URL}/api/get-chat?session_id=${id}`;\n    }\n    try {\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(\"Chat history not found\");\n      }\n      const data = await response.json();\n\n      // Set the state with the loaded data\n      setChatMessages(data.chatHistory || []);\n      setAnalysisResult(data.analysisHistory || null);\n    } catch (error) {\n      console.error(\"Failed to load chat history:\", error);\n      // If it fails (like a new user), just clear the state\n      setChatMessages([]);\n      setAnalysisResult(null);\n    }\n  };\n\n  // --- Load the user's chat when the app first starts ---\n  useEffect(() => {\n    // We wait until the sessionId is set\n    if (sessionId) {\n      loadChatHistory(sessionId, false);\n    }\n  }, [sessionId]); // This runs when 'sessionId' changes\n\n  // pass new analysis to terminalwindow.\n  const updateAnalysis = result => {\n    setAnalysisResult(result);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-layout\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-column\",\n      children: /*#__PURE__*/_jsxDEV(ChatWindow, {\n        messages: chatMessages,\n        setMessages: setChatMessages,\n        updateAnalysis: updateAnalysis // <-- Pass the new function\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"terminal-column\",\n      children: /*#__PURE__*/_jsxDEV(TerminalWindow, {\n        analysis: analysisResult\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 7\n  }, this);\n}\n_s(App, \"amSVejb4Z0uMbnKl6SpxDhIMRLc=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","ChatWindow","TerminalWindow","jsxDEV","_jsxDEV","App","_s","chatMessages","setChatMessages","analysisResult","setAnalysisResult","sessionId","setSessionId","useEffect","currentId","localStorage","getItem","Date","now","Math","random","toString","substring","setItem","loadChatHistory","id","isTemplate","url","API_URL","response","fetch","ok","Error","data","json","chatHistory","analysisHistory","error","console","updateAnalysis","result","className","children","messages","setMessages","fileName","_jsxFileName","lineNumber","columnNumber","analysis","_c","$RefreshReg$"],"sources":["/Users/nielo/Desktop/website/src/App.tsx"],"sourcesContent":["// src/App.tsx\n\nimport React, { useState } from 'react';\nimport ChatWindow from './components/ChatWindow';\nimport TerminalWindow from './components/TerminalWindow';\nimport { ChatMessage, AnalysisResult } from './types';\nimport './styles/AppLayout.css'; // Import new layout CSS\n\nfunction App() {\n  // State for chat window \n  const [chatMessages, setChatMessages] = useState<ChatMessage[]>([]);\n\n  // State for analysis result\n  const [analysisResult,setAnalysisResult] = useState<AnalysisResult | null>(null);\n\n  // get users session id\n\n  const [sessionId, setSessionId] = useState<AnalysisResult | null>(null)\n\n  // create users id\n  useEffect(() => {\n    let currentId = localStorage.getItem('chat_session_id');\n    if (!currentId) {\n      // (use your safe random string generator here)\n      currentId = `session_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`;\n      localStorage.setItem('chat_session_id', currentId);\n    }\n    setSessionId(currentId);\n  }, []);\n\n  // function to load chat history from backend\n  const loadChatHistory = async (id: string | null, isTemplate: boolean = false) => {\n    if (!id) return; // Don't load if no ID is ready\n\n    let url = \"\";\n    if (isTemplate) {\n      url = `${API_URL}/api/get-chat?template=${id}`;\n    } else {\n      url = `${API_URL}/api/get-chat?session_id=${id}`;\n    }\n\n    try {\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(\"Chat history not found\");\n      }\n      \n      const data = await response.json();\n      \n      // Set the state with the loaded data\n      setChatMessages(data.chatHistory || []);\n      setAnalysisResult(data.analysisHistory || null);\n      \n    } catch (error) {\n      console.error(\"Failed to load chat history:\", error);\n      // If it fails (like a new user), just clear the state\n      setChatMessages([]);\n      setAnalysisResult(null);\n    }\n  };\n\n  // --- Load the user's chat when the app first starts ---\n  useEffect(() => {\n    // We wait until the sessionId is set\n    if (sessionId) {\n      loadChatHistory(sessionId, false);\n    }\n  }, [sessionId]); // This runs when 'sessionId' changes\n\n    // pass new analysis to terminalwindow.\n  const updateAnalysis = (result: AnalysisResult) => {\n      setAnalysisResult(result);\n    };\n    return (\n      <div className=\"main-layout\">\n        <div className=\"chat-column\">\n          <ChatWindow \n            messages={chatMessages}\n            setMessages={setChatMessages}\n            updateAnalysis={updateAnalysis} // <-- Pass the new function\n          />\n        </div>\n        \n        <div className=\"terminal-column\">\n          {/* Pass the new state object */}\n          <TerminalWindow analysis={analysisResult} />\n        </div>\n      </div>\n    );\n  }\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}